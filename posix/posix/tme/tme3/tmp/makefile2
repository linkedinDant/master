CC=GCC
# ON NE MET PAS -ANSI CAR CERTAINS COMMENTAIRES PEUVENT FAIRE PLANTER LA COMPILATION (é, ', ... DANS LES COMMENTAIRES)
CFLAGS=-WALL -PTHREAD
# ON LANCE TOUTES LES DIRECTIVES POUR TOUS LES EXERCICES
ALL=CLEAN EXO1 EXO2 EXO3 EXO5
OBJ=OBJ/$@.O

ALL : ${ALL}

EXO1:
	@ECHO "GéNéRATION DE" $@ "EN COURS..."
	${CC} -O ${OBJ} -I INCLUDE/ SRC/$@.C ${CFLAGS}
	CP ${OBJ} BIN/$@
	@ECHO "FIN DE LA GéNéRATION DE" $@

EXO2:
	@ECHO "GéNéRATION DE" $@ "EN COURS..."
	${CC} -O ${OBJ} -I INCLUDE/ SRC/$@.C ${CFLAGS}
	CP ${OBJ} BIN/$@
	@ECHO "FIN DE LA GéNéRATION DE" $@

EXO3:THREAD_STACK-1
	@ECHO "GéNéRATION DE" $@ "EN COURS..."
	${CC} -O $(OBJ) -I INCLUDE/ OBJ/$<.O SRC/$@.C $(CFLAGS)
	CP ${OBJ} BIN/$@
	@ECHO "FIN DE LA GéNéRATION DE" $@

THREAD_STACK-1: 
	${CC} -O OBJ/$@.O -C SRC/THREAD_STACK-1.C -I INCLUDE/ ${CFLAGS}
	
EXO5:
	@ECHO "GéNéRATION DE" $@ "EN COURS..."
	${CC} -O ${OBJ} -I INCLUDE/ SRC/$@.C ${CFLAGS}
	CP ${OBJ} BIN/$@
	@ECHO "FIN DE LA GéNéRATION DE" $@

CLEAN:
	@ECHO "DéBUT DU NETTOYAGE..."
	RM -F BIN/* OBJ/*.O LIB/*.A
	@ECHO "FIN DU NETTOYAGE."
